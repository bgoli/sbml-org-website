<!-- ==========================================================================
File name   : /layouts/shortcodes/cite.html
Description : Shortcode for citing papers or software
Author(s)   : Michael Hucka <mhucka@caltech.edu>
Organization: California Institute of Technology
Date created: 2020-04-05

This is used in places like /software/converters and /documents/publications/.
The optional argument "type" is used to change the icon when the citation is
not to a paper.
=========================================================================== -->

{{ $title   := .Get "title" }}
{{ $authors := .Get "authors" }}
{{ $source  := .Get "source" }}
{{ $type    := .Get "type" | default "paper" }}
{{ $link    := .Get "link" }}
{{ $summary := .Get "summary" | default "" }}
{{ $notice  := .Get "notice" | default "false" }}
{{ $bibtex  := .Get "bibtex" | default "" }}
{{ $endnote := .Get "endnote" | default "" }}

{{ $icon    := "fa-file-pdf fas" }}
{{ if eq $type "software" }}
  {{ $icon = "fa-file-code fas" }}
{{ end }}

{{ if eq $notice "true" }}
  {{ $notice = "notice" }}
{{ end }}

<div class="citation {{ $notice }}">
  <span class="citation-icon"><a href="{{ $link }}"><i class="{{ $icon }} fa-2x"></i></a></span><span class="citation-title"><a href="{{ $link }}">{{ $title | markdownify }}</a></span>
  <span class="citation-authors">{{ $authors | markdownify }}</span>
  <span class="citation-source">{{ $source | markdownify }}</span>
  {{- if ne $summary "" -}}
    <span class="citation-summary">{{ $summary | markdownify }}</span>    
    {{ end }}
   {{ if or (ne $bibtex "") (ne $endnote "") }}
    <div class="citation-downloads">
      {{ if ne $bibtex "" }}
      <span class="citation-bibtex"><a href="{{ $bibtex }}"><i class="fa-file-download fas fa-1x"></i>BibTeX</a></span>
      {{ end }}
      {{ if ne $endnote "" }}
      <span class="citation-endnote"><a href="{{ $endnote }}"><i class="fa-file-download fas fa-1x"></i>EndNote</a></span>
      {{ end }}
    </div>
  {{- end -}}
</div>
