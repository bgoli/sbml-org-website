<!-- HTML header for Doxygen -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>libSBML C API: Reading and writing SBML content</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="sbml.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="libsbml-doxygen-stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libSBML C API
   &#160;<span id="projectnumber">5.18.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="group__core.html"><span>Core&#160;libSBML</span></a></li>
      <li><a href="usergroup0.html"><span>Level&#160;3&#160;Extensions</span></a></li>
      <li><a href="annotated.html"><span>Structures,&#160;functions</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="libsbml-example-files-c.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('libsbml-reading-files.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Reading and writing SBML content </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#rf-started">Getting started: the 1-minute introduction</a></li>
<li class="level1"><a href="#rf-reading">Reading SBML</a></li>
<li class="level1"><a href="#rf-sbmldocument">The SBMLDocument_t container</a></li>
<li class="level1"><a href="#rf-writing">Writing SBML</a></li>
</ul>
</div>
<div class="textblock"><p>This section summarizes how to read and write SBML content using the facilities provided by libSBML.</p>
<p>This is only a basic orientation to these essential facilities of libSBML, and is far from exhaustive in its coverage. Readers are directed to the rest of this manual for more details about using libSBML's many features and facilities. Please use the navigation bar near the top of the page and the table of contents in the left-hand column for navigating to other parts of this manual.</p>
<h1><a class="anchor" id="rf-started"></a>
Getting started: the 1-minute introduction</h1>
<p>LibSBML provides the class <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> as a top-level container for storing SBML content and data associated with it (such as warnings and error messages). Here is a simple example to start this discussion: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_s_b_m_l_types_8h.html">sbml/SBMLTypes.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span></div><div class="line">main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div><div class="line">{</div><div class="line">  <a class="code" href="class_s_b_m_l_document__t.html">SBMLDocument_t</a>* document = readSBML(argv[1]);</div><div class="line"></div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errors = document-&gt;getNumErrors();</div><div class="line"></div><div class="line">  cout &lt;&lt; endl;</div><div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;  filename: &quot;</span> &lt;&lt; argv[1] &lt;&lt; endl;</div><div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;  error(s): &quot;</span> &lt;&lt; errors  &lt;&lt; endl;</div><div class="line">  cout &lt;&lt; endl;</div><div class="line"></div><div class="line">  <span class="keywordflow">if</span> (errors &gt; 0) document-&gt;printErrors(cerr);</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> errors;</div><div class="line">}</div></div><!-- fragment --><p> The code above illustrates probably the simplest possible use of libSBML: reading a model and printing any errors or warnings encountered. The code begins with the inclusion of a single SBML header file, <a class="el" href="_s_b_m_l_types_8h.html" title="Include all SBML types in a single header file. ">SBMLTypes.h</a>, which serves to include most of the other useful libSBML individual header files. Next, in the body of the main function, the line </p><div class="fragment"><div class="line"><a class="code" href="class_s_b_m_l_document__t.html">SBMLDocument_t</a>* document = <a class="code" href="class_s_b_m_l_reader__t.html#ae1e45608297c7007f738932177f06356">readSBML</a>(argv[1]);</div></div><!-- fragment --><p> reads in a file and returns a pointer to an <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object. A subsequent call to the method <a class="el" href="class_s_b_m_l_document__t.html#a83cda2af484dbf8c57e7cc34f5c472fc">getNumErrors() </a> on that object returns the number of errors encountered (if any), and a call to <a class="el" href="class_s_b_m_l_document__t.html#a36c6670ae6ca3ed62ab632fe7bd4373f">printErrors() </a> method prints the errors (if any) to the C++ standard error output stream.</p>
<h1><a class="anchor" id="rf-reading"></a>
Reading SBML</h1>
<p>SBML may be read from a file or an in-memory character string into an <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object. LibSBML defines two basic, convenient, global functions (not methods on a specific object class, but global functions in the classic C programming sense) for reading SBML:</p>
<ul>
<li><code>SBMLDocument_t* <a class="el" href="class_s_b_m_l_reader__t.html#ac1b98141d30716bcfe01b5b59a96fc00" title="Reads an SBML document from the given file. ">readSBMLFromFile(const char* filename)</a></code>. This function takes a file name, attempts to read an SBML document from the file, and returns a pointer to an <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object if successful. </li>
<li><code>SBMLDocument_t* <a class="el" href="class_s_b_m_l_reader__t.html#a74c8e0978b287df6dcedd45303f950d9" title="Reads an SBML document from a text string. ">readSBMLFromString(const char* xml)</a></code>. This function takes a string containing XML content, attempts to read an SBML document from the string, and returns a pointer to an <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object if successful.</li>
</ul>
<p>The model may be in any SBML Level and Version combination. LibSBML implements an unified object model for SBML that encompasses all SBML Levels, so applications generally do not need to worry about differences in syntax between these definitions of SBML when reading and writing models. (However, applications still need to be concerned about the <em>constructs</em> used and how they are interpreted, since there are substantial differences between SBML Level&#160;1, Level&#160;2, and Level&#160;3!)</p>
<h1><a class="anchor" id="rf-sbmldocument"></a>
The SBMLDocument_t container</h1>
<p>As might be deduced from the examples so far, an <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object in libSBML represents a whole SBML model and its associated data. <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> corresponds roughly to the class <em>SBML</em> (respectively, <em>Sbml</em>) defined in the specification for SBML Level&#160;3 (respectively, Level&#160;2), but it does not have a direct correspondence in SBML Level&#160;1. (Nevertheless, it is created by libSBML no matter whether the model is Level&#160;1, Level&#160;2 or Level&#160;3.)</p>
<p><a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> is derived from <a class="el" href="class_s_base__t.html" title=" SBML&#39;s SBase class, base class of most SBML objects. ">SBase_t</a>, so that it contains the usual <a class="el" href="class_s_base__t.html" title=" SBML&#39;s SBase class, base class of most SBML objects. ">SBase_t</a> attributes (in SBML Level&#160;2 and&#160;3) of "metaid" and "sboTerm", as well as the subelements "notes" and "annotation". It also contains the attributes "level" and "version" indicating the Level and Version of the SBML content that was read. <a class="el" href="class_s_base__t.html" title=" SBML&#39;s SBase class, base class of most SBML objects. ">SBase_t</a> (and thus its subclasses such as <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a>) provides methods for querying this information:</p>
<ul>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document__t.html#a2fd84a0e95464d88e9117476a952f9fc">getLevel()</a></code> on an <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object returns the SBML Level of the model. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document__t.html#acba88d87c51ecdec73cca55fb694f1d9">getVersion()</a></code> on an <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object returns the SBML Version within the Level of the model.</li>
</ul>
<p>Of course, the whole point of reading an SBML file or data stream is to get at the SBML model it contains. The following method allows access to the <a class="el" href="class_model__t.html" title=" An SBML model. ">Model_t</a> object within an SBML document:</p>
<ul>
<li><code>Model_t* <a class="el" href="class_s_b_m_l_document__t.html#ab274158ccb1fe4f22bea1ecd777b03a6">getModel()</a></code> on an <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object returns a <a class="el" href="class_model__t.html" title=" An SBML model. ">Model_t</a> object representing the SBML model contained within that <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object.</li>
</ul>
<p><a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> also acts to log any problems encountered while reading the model from the file or data stream. Whether the problems are warnings or errors, they are reported through a single common interface involving the object class <a class="el" href="group__core.html#class_s_b_m_l_error__t" title=" An error, warning or other diagnostic. ">SBMLError_t</a>. The example earlier on this page already showed some of the methods available for accessing errors and warnings; here is a slightly more complete list:</p>
<ul>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document__t.html#a83cda2af484dbf8c57e7cc34f5c472fc">getNumErrors()</a></code> on an <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object returns a count of the diagnostic messages logged while attempting to read an SBML model using either <code>SBMLReader_t::readSBMLFromFile(const std::string&amp; filename)</code> or <code>SBMLReader_t::readSBMLFromString(const std::string&amp; xml)</code>. </li>
<li><code>const SBMLError_t* <a class="el" href="class_s_b_m_l_document__t.html#a80e40350e51977032a1fc8235b262ab6">getError(unsigned int n)</a></code> returns a specific error indexed by the integer <code>n</code>. (Callers should first use <code><a class="el" href="class_s_b_m_l_document__t.html#a83cda2af484dbf8c57e7cc34f5c472fc">getNumErrors()</a></code> to get the number of errors, so that they can know the range of valid index numbers.) The <a class="el" href="group__core.html#class_s_b_m_l_error__t" title=" An error, warning or other diagnostic. ">SBMLError_t</a> object class provides methods for assessing the severity of the problem encountered and for finding out the line and column number of where the problem occurred in the SBML input. </li>
<li><code>void <a class="el" href="class_s_b_m_l_document__t.html#a36c6670ae6ca3ed62ab632fe7bd4373f">printErrors(std::ostream_t&amp; stream = std::cerr)</a></code> on an <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object prints all of the diagnostics to the given output stream, defaulting to the standard error stream if no stream argument is given in the call.</li>
</ul>
<p>Finally, another set of <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> methods worth mentioning in the context of reading SBML are those for running consistency-checking and validation rules on the SBML content. These methods assess whether the SBML is legal according to basic rules listed in the SBML Level&#160;2 and Level&#160;3 specification documents. Note that they are mostly structural checks, in the sense that they can indicate whether the SBML is properly constructed; they cannot tell if a model is nonsense. (But at least they can assess whether it's syntactically correct nonsense!).</p>
<ul>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document__t.html#ad0eabf8dad9a439e712780014c370c0f">checkConsistency()</a></code>, invoked on an <a class="el" href="class_s_b_m_l_document__t.html" title=" Overall SBML container object. ">SBMLDocument_t</a> object, performs a set of structural and mathematical checks on the SBML content and reports the number of failed checks (errors) encountered. Callers may use <code><a class="el" href="class_s_b_m_l_document__t.html#a83cda2af484dbf8c57e7cc34f5c472fc">getNumErrors()</a></code> and <code><a class="el" href="class_s_b_m_l_document__t.html#a80e40350e51977032a1fc8235b262ab6">getError(unsigned int n)</a></code> interfaces to examine the individual errors. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document__t.html#abfe6b13e7e3adc89bcd71da836349cb6">checkL1Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;1, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document__t.html#a94396072bdb793971bdc9288b5869afb">checkL2v1Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version 1, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document__t.html#a1541fa028db1628e4d65aa8d24f400d9">checkL2v2Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version&#160;2, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document__t.html#a2407ece9f980741a5f08329c4e8e0406">checkL2v3Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version&#160;3, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document__t.html#a56c4cc74e4c01df19eb2f205769613fc">checkL2v4Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version&#160;4, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document__t.html#ae4c4a582157ea955b2542fe0b34db539">checkL3v1Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;3 Version&#160;1, and returns the number of failures. If all the checks succeed, it returns <code>0</code>.</li>
</ul>
<p>At the time of this release of libSBML, the most recent release of SBML is Level&#160;3 Version&#160;2 Core Release&#160;1 (RC&#160;2).</p>
<h1><a class="anchor" id="rf-writing"></a>
Writing SBML</h1>
<p>Writing SBML is, in the end, a very simple matter in libSBML. The library provides the class <a class="el" href="class_s_b_m_l_writer__t.html" title=" File and text-string SBML writer. ">SBMLWriter_t</a> for this purpose, and <a class="el" href="class_s_b_m_l_writer__t.html" title=" File and text-string SBML writer. ">SBMLWriter_t</a> offers the following methods:</p>
<ul>
<li><code>bool SBMLWriter_t::writeSBMLToFile(const SBMLDocument_t* d, const std::string&amp; filename)</code> writes the given SBML document to the named file and returns either <code>true</code> on success or <code>false</code> on failure. Reasons for failure can be, for example, that the named file could not be opened for writing. </li>
<li><code>char* <a class="el" href="class_s_b_m_l_writer__t.html#a0c449ddeefb51e9984c52f60cead5758" title="Writes the given SBML document d to an in-memory string and returns a pointer to it. ">SBMLWriter_t::writeSBMLToString(const SBMLDocument_t* d)</a> </code> writes the given SBML document to a character string and returns a pointer to it, or returns <code>NULL</code> if a failure occurred. The string is owned by the caller and should be freed (using the standard C function <code>free()</code>) after it is no longer needed. </li>
<li><code>bool SBMLWriter_t::writeSBML(const SBMLDocument_t* d, std::ostream_t&amp; stream)</code> writes the given SBML document to the given output stream and returns either <code>true</code> on success or <code>false</code> on failure. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for Doxygen -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      Visit <a href="http://sbml.org">SBML.org</a> for more information
    about SBML and libSBML.
    </li>
   </ul>
</div>
</body>
</html>
