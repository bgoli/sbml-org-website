<!-- HTML header for Doxygen -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>libSBML C# API: Reading and writing SBML content from your software</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="sbml.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="libsbml-doxygen-stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libSBML C# API
   &#160;<span id="projectnumber">5.18.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="group__core.html"><span>Core&#160;libSBML</span></a></li>
      <li><a href="usergroup0.html"><span>Level&#160;3&#160;Extensions</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="libsbml-csharp-example-files.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('libsbml-csharp-reading-files.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Reading and writing SBML content from your software </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This section summarizes how to read and write SBML content using the facilities provided by the libSBML C# API.</p>
<h1><a class="anchor" id="rf-started"></a>
Getting started: the 1-minute introduction</h1>
<p>In LibSBML, the class libsbmlcs.SBMLDocument is used as a top-level container for storing SBML content and data associated with it (such as warnings and error messages). Here is a simple example to start this discussion: </p><div class="fragment"><div class="line"><span class="keyword">namespace </span>LibSBMLCSExample</div><div class="line">{</div><div class="line">  <span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>;</div><div class="line">  <span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.IO;</div><div class="line">  <span class="keyword">using</span> libsbml;</div><div class="line"></div><div class="line">  <span class="keyword">public</span> <span class="keyword">class </span>echoSBML</div><div class="line">  {</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Main ( <span class="keywordtype">string</span>[] args )</div><div class="line">    {</div><div class="line">      <span class="keywordflow">if</span> ( args.Length != 2 )</div><div class="line">      {</div><div class="line">        <span class="keywordtype">string</span> myname = Path.GetFileName(Environment.GetCommandLineArgs()[0]);</div><div class="line">        Console.WriteLine(<span class="stringliteral">&quot;Usage: {0} input-filename output-filename&quot;</span>, myname);</div><div class="line">        Environment.Exit(1);</div><div class="line">      }</div><div class="line"></div><div class="line">      <span class="keywordtype">string</span> inputFile  = args[0];</div><div class="line">      <span class="keywordtype">string</span> outputFile = args[1];</div><div class="line"></div><div class="line">      <span class="keywordflow">if</span> ( ! File.Exists(inputFile) )</div><div class="line">      {</div><div class="line">        Console.WriteLine(<span class="stringliteral">&quot;[Error] {0} : No such file.&quot;</span>, inputFile);</div><div class="line">        Environment.Exit(1);        </div><div class="line">      }</div><div class="line"></div><div class="line">      SBMLReader   reader  = <span class="keyword">new</span> SBMLReader();</div><div class="line">      SBMLWriter   writer  = <span class="keyword">new</span> SBMLWriter();</div><div class="line">      SBMLDocument sbmlDoc = reader.readSBML(inputFile);</div><div class="line"></div><div class="line">      <span class="keywordflow">if</span> ( sbmlDoc.getNumErrors() &gt; 0)</div><div class="line">      {</div><div class="line">        sbmlDoc.printErrors(); </div><div class="line">        Console.WriteLine(<span class="stringliteral">&quot;[Error] Cannot read {0}&quot;</span>, inputFile);</div><div class="line">        Environment.Exit(1);        </div><div class="line">      }</div><div class="line"></div><div class="line">      writer.writeSBML(sbmlDoc, outputFile);</div><div class="line"></div><div class="line">      Console.WriteLine(<span class="stringliteral">&quot;[OK] Echoed {0} to {1}&quot;</span>, inputFile, outputFile);</div><div class="line">    }</div><div class="line">  }</div><div class="line"></div><div class="line">}</div></div><!-- fragment --><p>The code above illustrates probably the simplest possible use of libSBML: reading a model and printing any errors or warnings encountered. The code begins with a C# <code>import</code> command to load the libSBML API into the running C# interpreter. Next, it instantiates an <a class="el" href="classlibsbmlcs_1_1_s_b_m_l_reader.html" title=" File and text-string SBML reader. ">libsbmlcs.SBMLReader</a> object and stores it in a variable called <code>reader</code>. Then, it uses this object to read an SBML model stored in a file, creating an libsbmlcs.SBMLDocument object in the process and storing it in the variable <code>document</code>. Finally, it calls on the libsbmlcs.SBMLDocument.getNumErrors() method to check if any errors were encountered.</p>
<h1><a class="anchor" id="rf-reading"></a>
Reading SBML</h1>
<p>SBML may be read from a file or an in-memory character string into a libsbmlcs.SBMLDocument object. LibSBML defines two basic, convenient, global functions for reading SBML:</p>
<ul>
<li><code>libsbmlcs.SBMLDocument <a class="el" href="classlibsbmlcs_1_1libsbml.html#af8edcef404afe9f065cd6c313c152b68" title="Reads an SBML document from the given file. ">libsbmlcs.libsbml.readSBMLFromFile(string filename)</a></code>. This function takes a file name, attempts to read an SBML document from the file, and returns a libsbmlcs.SBMLDocument object if successful. </li>
<li><code>libsbmlcs.SBMLDocument <a class="el" href="classlibsbmlcs_1_1libsbml.html#a3f7eb30a4e7d404f37777f0cc0a21797" title="Reads an SBML document from a text string. ">libsbmlcs.libsbml.readSBMLFromString</a>(string xml)</code>. This function takes a string assumed to contain XML content, attempts to read an SBML document from the string, and returns a libsbmlcs.SBMLDocument object if successful.</li>
</ul>
<p>The model may be either in SBML Level&#160;1 or SBML Level&#160;2 format. LibSBML implements an unified object model for SBML that encompasses both Level&#160;1 and Level&#160;2, so applications generally do not need to worry about differences in syntax between these definitions of SBML when reading and writing models. (However, applications still need to be concerned about the <em>constructs</em> used and how they are interpreted, since there are substantial differences between SBML Level&#160;1 and Level&#160;2!)</p>
<h1><a class="anchor" id="rf-sbmldocument"></a>
The libsbmlcs.SBMLDocument container</h1>
<p>As might be deduced from the examples so far, an libsbmlcs.SBMLDocument object in libSBML represents a whole SBML model and its associated data. The libsbmlcs.SBMLDocument class corresponds roughly to the class <em>SBML</em> (respectively, <em>Sbml</em>) defined in the specification for SBML Level&#160;3 (respectively, Level&#160;2), but it does not have a direct correspondence in SBML Level&#160;1. (But, it is created by libSBML no matter whether the model is Level&#160;1 or Level&#160;2.)</p>
<p>libsbmlcs.SBMLDocument is derived from <a class="el" href="classlibsbmlcs_1_1_s_base.html" title=" SBML&#39;s SBase class, base class of most SBML objects. ">libsbmlcs.SBase</a>, so that it contains the usual <a class="el" href="classlibsbmlcs_1_1_s_base.html" title=" SBML&#39;s SBase class, base class of most SBML objects. ">libsbmlcs.SBase</a> attributes (in SBML Level&#160;2 Version&#160;3) of "metaid" and "sboTerm", as well as the subelements "notes" and "annotation". It also contains the attributes "level" and "version" indicating the Level and Version of the SBML read. <a class="el" href="classlibsbmlcs_1_1_s_base.html" title=" SBML&#39;s SBase class, base class of most SBML objects. ">libsbmlcs.SBase</a> (and thus its subclasses such as libsbmlcs.SBMLDocument) provides methods for querying this information:</p>
<ul>
<li><code>int libsbmlcs.SBMLDocument.getLevel()</code> returns the SBML Level of the model. </li>
<li><code>int libsbmlcs.SBMLDocument.getVersion()</code> returns the SBML Version within the Level of the model.</li>
</ul>
<p>Of course, the whole point of reading an SBML file or data stream is to get at the SBML model it contains. The following method allows access to the Model object within an SBML document:</p>
<ul>
<li><code>libsbmlcs.SBMLDocument.getModel()</code> returns a <a class="el" href="classlibsbmlcs_1_1_model.html" title=" An SBML model. ">libsbmlcs.Model</a> object for the SBML model contained in the libsbmlcs.SBMLDocument.</li>
</ul>
<p>libsbmlcs.SBMLDocument also acts to log any problems encountered while reading the model from the file or data stream. Whether the problems are warnings or errors, they are reported through a single common interface involving the object class SBMLError. The example earlier on this page already showed some of the methods available for accessing errors and warnings; here is a slightly more complete list:</p>
<ul>
<li><code>int libsbmlcs.SBMLDocument.getNumErrors()</code> returns a count of the diagnostic messages logged during while attempting to read an SBML model using either <a class="el" href="classlibsbmlcs_1_1libsbml.html#af8edcef404afe9f065cd6c313c152b68" title="Reads an SBML document from the given file. ">libsbmlcs.libsbml.readSBMLFromFile()</a> or <a class="el" href="classlibsbmlcs_1_1libsbml.html#a3f7eb30a4e7d404f37777f0cc0a21797" title="Reads an SBML document from a text string. ">libsbmlcs.libsbml.readSBMLFromString()</a>. </li>
<li><code><a class="el" href="classlibsbmlcs_1_1_s_b_m_l_error.html" title=" An error, warning or other diagnostic. ">libsbmlcs.SBMLError</a> libsbmlcs.SBMLDocument.getError(long n)</code> returns the error indexed by integer <code>n</code> in the error log. The <a class="el" href="classlibsbmlcs_1_1_s_b_m_l_error.html" title=" An error, warning or other diagnostic. ">libsbmlcs.SBMLError</a> object class provides methods for displaying an error message, assessing the severity of the problem encountered, and for finding out the line and column number of where the problem occurred in the SBML input. </li>
<li><code>libsbmlcs.SBMLDocument.printErrors()</code> prints to standard output all of the errors and diagnostics logged with the given libsbmlcs.SBMLDocument(). </li>
<li><code>libsbmlcs.SBMLDocument.printErrors(OStream stream)</code> is identical to the method above, but prints all of the diagnostics to the given output stream instead of the terminal.</li>
</ul>
<p>Finally, another set of libsbmlcs.SBMLDocument methods worth mentioning in the context of reading SBML are those for running consistency-checking and validation rules on the SBML content. These methods assess whether the SBML is legal according to basic rules listed in the SBML Level&#160;2 and Level&#160;3 specification documents. Note that they are mostly structural checks, in the sense that they can indicate whether the SBML is properly constructed; they cannot tell if a model is nonsense. (But at least they can assess whether it's syntactically correct nonsense!).</p>
<ul>
<li><code>int libsbmlcs.SBMLDocument.checkConsistency()</code> performs a set of structural and mathematical checks on the SBML content and reports the number of failed checks (errors) encountered. Use the libsbmlcs.SBMLDocument.getNumErrors() and libsbmlcs.SBMLDocument.getError(int n) interfaces to examine the individual errors. </li>
<li><code>int libsbmlcs.SBMLDocument.checkL1Compatibility()</code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;1, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>int libsbmlcs.SBMLDocument.checkL2v1Compatibility()</code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version 1, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>int libsbmlcs.SBMLDocument.checkL2v2Compatibility()</code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version&#160;2, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>int libsbmlcs.SBMLDocument.checkL2v3Compatibility()</code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version&#160;3, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>int libsbmlcs.SBMLDocument.checkL2v4Compatibility()</code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version&#160;4, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>int libsbmlcs.SBMLDocument.checkL3v1Compatibility()</code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;3 Version&#160;1, and returns the number of failures. If all the checks succeed, it returns <code>0</code>.</li>
</ul>
<p>This release of libSBML supports Levels/Versions of SBML up through Level&#160;3 Version&#160;2 Core Release&#160;1 (RC&#160;2).</p>
<h1><a class="anchor" id="rf-writing"></a>
Writing SBML</h1>
<p>Writing SBML is, in the end, a very simple matter in libsbmlcs. The library provides the following methods for this purposes:</p>
<ul>
<li><code>int <a class="el" href="classlibsbmlcs_1_1libsbml.html#a5c2e2b25184e30b8e646efa329170ba8" title="Writes the given SBML document d to the file filename. ">libsbmlcs.libsbml.writeSBMLToFile(SBMLDocument d, string filename)</a></code> writes the given SBML document to a file, and returns either <code>1</code> on success or <code>0</code> on failure. Reasons for failure can be, for example, that the named file could not be opened for writing. </li>
<li><code>string <a class="el" href="classlibsbmlcs_1_1libsbml.html#a6578f60b52efba900769bf22557f9892" title="Writes the given SBML document d to an in-memory string and returns a pointer to it. ">libsbmlcs.libsbml.writeSBMLToString(SBMLDocument d)</a></code> returns the given SBML document as a character string, or returns an empty string if a failure occurred. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for Doxygen -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      Visit <a href="http://sbml.org">SBML.org</a> for more information
    about SBML and libSBML.
    </li>
   </ul>
</div>
</body>
</html>
